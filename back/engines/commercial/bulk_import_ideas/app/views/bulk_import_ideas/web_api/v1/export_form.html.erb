<html>
<head>
  <title><%= project.title_multiloc[locale] %> - <%= phase.title_multiloc[locale] %></title>
  <style>
      @page { size: A4;
          margin: 40px 40px 80px;
          @bottom-right {
              font-family: "OpenSans", sans-serif; /* TODO: OpenSans does not work, but we intend to use the custom fonts for each platform anyway */
              content: '<%= page_copy %> ' counter(page);
              margin-bottom: 10px;
          }
      } /* TODO: Page bottom margin not quite right */
      body { font-family: "OpenSans", sans-serif; }
      p, li { font-size: 12pt; }

      #header {
          img {
              width: 225px;
              height: auto;
              margin-bottom: 0;
          }

          h1 {
              margin-top: 0;
          }

          ul.instructions {
              border-left: solid 4px #000;
              padding-top: 5px;
              padding-bottom: 5px
          }
      }

      #questions {
        h2 { margin-bottom: 10px; }
        p { margin-top: 0; }
        div.question { page-break-inside: avoid; margin-bottom: 30px; }
        div.options p { margin-bottom: 8px; }
        div.options input { margin-right: 10px; }
        div.line { border-bottom: solid 1px #000; margin: 10px 0; height: 25px}
          span.optional { font-weight: normal; }
      }
  </style>
</head>
<body>
<div id="header">
  <img src="<%= logo_url %>" alt="Logo" style="margin-bottom: 20px;" />
  <h1><%= project.title_multiloc[locale] %> - <%= phase.title_multiloc[locale] %></h1>
  <h2><%= instructions[:title] %></h2>
  <ul class="instructions">
    <li><%= instructions[:bullet1] %></li>
    <li><%= instructions[:bullet2] %></li>
  </ul>
</div>

<!-- TODO: Personal data section -->

<div id="questions">
<% form_fields.each_with_index do |custom_field, i| %>
  <div class="question">
    <h2>
      <%= custom_field.title_multiloc[locale] %>
      <% unless custom_field.required? %>
        <span class="optional">(<%= optional %>)</span>
      <% end %>
    </h2>
    <%= sanitize custom_field.print_description(locale) %>

    <p>
      <%= sanitize custom_field.print_visibility_disclaimer(locale) %>
      <%= custom_field.multiselect_print_instructions(locale) %>
    </p>

    <% if custom_field.input_type == 'select' %>
      <div class="options">
      <% custom_field.options.each do |option| %>
        <p><input type="radio" /><%= option.title_multiloc[locale] %></p>
      <% end %>
      </div>

    <% elsif custom_field.input_type == 'multiselect' %>
      <div class="options">
        <% custom_field.options.each do |option| %>
          <p><input type="checkbox" /><%= option.title_multiloc[locale] %></p>
        <% end %>
      </div>

    <% elsif %w[multiline_text html_multiloc].include? custom_field.input_type %>
      <% 7.times do %>
        <div class="line"></div>
      <% end %>

    <% else %>
      <!-- Fallback currently covers:
            # text
            # text_multiloc
            # number
            # linear_scale
            # rating
            # sentiment_linear_scale
            # select_image
            # multiselect_image
            # checkbox
            # html
            # line
            # polygon
      -->
      <div class="line"></div>
    <% end %>

  </div>
<% end %>
</div>

</body>
</html>